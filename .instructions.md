# Poker Tournament Clock - Copilot Instructions

## Project Overview

This is a poker tournament clock application that displays a full-screen countdown timer for poker tournaments. It generates a single, self-contained HTML file with embedded CSS and JavaScript from a YAML configuration file.

**Key Features:**
- Large countdown timer with visual warnings
- Configurable tournament rounds via YAML
- Automatic progression between rounds
- Break indicator with different styling
- Keyboard control (spacebar to start/pause)
- Full-screen optimized for any device
- Static HTML deployment via GitHub Pages

## Technology Stack

- **Backend/Build**: Python 3.11+
  - PyYAML 6.0.1 for configuration parsing
- **Frontend**: Pure HTML, CSS, and JavaScript
  - No external dependencies or frameworks
  - Self-contained single-file application
- **Deployment**: GitHub Actions + GitHub Pages
- **Configuration**: YAML (config.yml)

## File Structure

- `generate_clock.py` - Python script that generates the HTML file
- `config.yml` - Tournament configuration (rounds, durations, breaks)
- `index.html` - Generated output (DO NOT EDIT DIRECTLY)
- `.github/workflows/deploy.yml` - GitHub Pages deployment workflow
- `requirements.txt` - Python dependencies
- `README.md` - User-facing documentation
- `USAGE.md` - Detailed usage instructions

## Build Instructions

1. Install Python dependencies:
   ```bash
   pip install -r requirements.txt
   ```

2. Generate the HTML file:
   ```bash
   python generate_clock.py
   ```

This reads `config.yml` and generates `index.html` with embedded tournament data.

## Testing Guidelines

**Manual Testing:**
1. After generating `index.html`, open it in a web browser
2. Test spacebar functionality (start/pause)
3. Verify timer countdown works correctly
4. Test visual warnings (orange at 2 min, red at 10 sec)
5. Verify auto-progression to next round
6. Test break rounds (different background color)

**Configuration Validation:**
- The script validates that `config.yml` contains a 'rounds' key
- Each round must have valid duration (positive number)
- Test with various configurations to ensure robustness

**Note:** This project currently has no automated unit tests. Manual testing is required.

## Deployment

The project automatically deploys to GitHub Pages via GitHub Actions when:
- Code is pushed to the `main` branch
- Workflow is manually triggered via workflow_dispatch

The workflow:
1. Checks out the repository
2. Sets up Python 3.11
3. Installs dependencies
4. Runs `generate_clock.py`
5. Uploads and deploys to GitHub Pages

## Coding Guidelines

### Python Code
- Use Python 3.11+ features
- Follow PEP 8 style guidelines
- Use descriptive variable and function names
- Include docstrings for functions
- Validate input data (especially YAML configuration)
- Use type hints where appropriate
- Handle errors gracefully with informative messages

### HTML/CSS/JavaScript
- Write clean, readable, self-documenting code
- Use semantic HTML
- Keep CSS organized and well-commented
- Use vanilla JavaScript (no frameworks)
- Maintain mobile responsiveness
- Ensure accessibility where possible

### YAML Configuration
- Keep configuration simple and readable
- Include comments explaining each field
- Maintain consistent structure
- Duration values are in minutes (converted to seconds by script)

## Important Constraints

1. **index.html is generated**: Never edit `index.html` directly. All changes must be made to `generate_clock.py` or `config.yml`.

2. **Self-contained output**: The generated HTML must be completely self-contained with no external dependencies (all CSS and JavaScript embedded).

3. **No external libraries in frontend**: The clock must work with pure HTML/CSS/JS only.

4. **Backwards compatibility**: Changes to `config.yml` format should maintain compatibility with existing configurations where possible.

## Common Tasks

### Adding a new tournament round
Edit `config.yml` and add a new round entry:
```yaml
- number: X
  name: "Round Name or Blinds"
  duration: Y  # in minutes
  is_break: false
```

### Modifying visual appearance
Edit the HTML template in `generate_clock.py` (within the `generate_html` function).

### Changing timer logic
Modify the JavaScript code embedded in the HTML template within `generate_clock.py`.

### Testing changes locally
1. Make changes to `generate_clock.py` or `config.yml`
2. Run `python generate_clock.py`
3. Open `index.html` in a browser
4. Test the timer functionality

## Error Handling

The script should handle these scenarios gracefully:
- Missing or invalid `config.yml` file
- Invalid YAML syntax
- Missing required fields in configuration
- Invalid duration values (non-numeric, negative, or zero)
- Empty rounds list

All errors should provide clear, actionable error messages.

## Development Workflow

1. Make changes to source files (`generate_clock.py` or `config.yml`)
2. Test locally by running the generator and opening `index.html`
3. Verify functionality works as expected
4. Commit changes (including regenerated `index.html`)
5. Push to trigger automatic deployment

## Notes for Copilot

- When modifying the timer logic, ensure backward compatibility
- Visual changes should maintain readability on large screens
- Keep the user interface simple and intuitive
- Preserve the single-file, self-contained nature of the output
- Consider screen size variations when making layout changes
- Test generated HTML in multiple browsers if making significant changes
